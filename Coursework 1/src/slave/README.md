# Slave program
This is the program which is run on the Adafruit Huzzah Board, a breakout board for an ESP8266 wireless module. It communicates with an MPU 6050 which is a 6 degrees of freedom accelerometer and gyroscope over an I2C bus. This allows the Huzzah board to read the acceleration values from the board before it then sends them over the WiFi to the server running the MQTT broker. The Huzzah is configured to respond to interrupts generated by the MPU 6050 when new data is available to be read.

## Structure
```
.
├── client.py
├── main.py
├── mqtt_script.sh
├── README.md
└── run.sh
```

`client.py` is the main file containing the code to communicate with the MPU 6050. This contains a client class which deals with all register initialisation and handles communication on the I2C bus.

`main.py` contains the code which is run by the ESP8266 when the board is reset. This instantiates the client before attaching an interrupt listener to the interrupt pin to listen for when data is available to be read.

`run.sh` is a shell script which is used to run the two commands to update `client.py` and `main.py` on the board. This is run as a normal shell script.


## Building & Running
If you are not using the default WiFi settings you need to change these manually in `client.py`. `SSID` Should contain the SSID of the network you are trying to connect to and `NETWORK_PW` should contain the password. You also need to change `BROKER` to correspond to the IP address of the computer running the MQTT broker if this is also not default. The IP address of the computer can be obtained by running `ifconfig` in the command line.


To program the board you need to run the shell script

`./run.sh`

This will update `client.py` and `main.py` on the board. After this the board can be reset using the on-board reset button and the program should commence running.
